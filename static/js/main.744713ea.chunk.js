(this["webpackJsonppoetry-app"]=this["webpackJsonppoetry-app"]||[]).push([[0],{23:function(e,t,i){e.exports=i(48)},28:function(e,t,i){},29:function(e,t,i){},30:function(e,t,i){},31:function(e,t,i){},37:function(e,t,i){},38:function(e,t,i){},47:function(e,t,i){},48:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(10),c=i.n(o),s=(i(28),i(3)),d=i(6),r=i(7),u=i(11),l=i(12),h=i(14),g=i(13),p=i(2),b=i(15),m=i(9),E=i.n(m),f=(i(29),function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e={onStop:this.props.onStop,onDrag:this.props.handleDrag};return a.a.createElement(E.a,Object.assign({bounds:"parent"},e),a.a.createElement("div",{textid:this.props.textId,className:"text",onDoubleClick:this.props.editText,style:{position:"absolute",top:this.props.editLocation?"".concat(this.props.editLocation.y,"px"):"0px",left:this.props.editLocation?"".concat(this.props.editLocation.x,"px"):"0px"}},this.props.children))}}]),t}(a.a.Component)),y=(i(30),function(e){return a.a.createElement("div",{className:"input",onKeyPress:function(t){13===t.which&&e.doneEditing("ADD_LINE")},style:{position:"absolute",top:"".concat(e.editLocation.y,"px"),left:"".concat(e.editLocation.x,"px")}},a.a.createElement("input",{type:"text",autoFocus:!0,defaultValue:e.editValue,className:"input-text",onChange:e.handleInput}),a.a.createElement("button",{className:"input-button add-button",onClick:function(){return e.doneEditing("ADD_LINE")}},"add"),a.a.createElement("button",{className:"input-button exit-button",onClick:function(){return e.doneEditing("EXIT")}},"exit"),a.a.createElement("button",{className:"input-button remove-button",onClick:function(){return e.doneEditing("REMOVE_LINE")}},"remove"))}),x=(i(31),function(){return"undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}),v=function(e){function t(e){var i;return Object(u.a)(this,t),(i=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={lines:{},page:"",isEditing:!1,editValue:"",pendingLine:"",currentDraggedLine:"",editLocation:{x:"",y:""}},i.editLine=i.editLine.bind(Object(p.a)(i)),i.doneEditing=i.doneEditing.bind(Object(p.a)(i)),i.handleInput=i.handleInput.bind(Object(p.a)(i)),i.editText=i.editText.bind(Object(p.a)(i)),i.addLine=i.addLine.bind(Object(p.a)(i)),i.generateKey=i.generateKey.bind(Object(p.a)(i)),i.onStop=i.onStop.bind(Object(p.a)(i)),i.handleDrag=i.handleDrag.bind(Object(p.a)(i)),i}return Object(b.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector(".page");this.setState({page:e})}},{key:"onStop",value:function(){if(this.state.currentDraggedLine){var e=this.createText(this.state.currentDraggedLine.props.children,this.state.currentDraggedLine.key);this.setState({lines:Object(r.a)({},this.state.lines,Object(d.a)({},e.key,e)),currentDraggedLine:""})}}},{key:"handleDrag",value:function(e){this.state.currentDraggedLine||this.setState({currentDraggedLine:this.state.lines[e.target.getAttribute("textid")]})}},{key:"editLine",value:function(e){this.state.isEditing||(this.setState({isEditing:!0}),e.target.getAttribute("class").includes("page")?this.setState({editLocation:{x:e.clientX-e.target.getBoundingClientRect().x,y:e.clientY-e.target.getBoundingClientRect().y}}):e.target.getAttribute("class").includes("guide")?this.setState({editLocation:{x:e.clientX-this.state.page.getBoundingClientRect().x,y:e.clientY-this.state.page.getBoundingClientRect().y}}):this.setState({editLocation:{x:e.target.getBoundingClientRect().x-this.state.page.getBoundingClientRect().x,y:e.target.getBoundingClientRect().y-this.state.page.getBoundingClientRect().y}}))}},{key:"editText",value:function(e){e.stopPropagation(),this.editLine(e);var t=this.state.lines[e.target.getAttribute("textid")];this.setState({pendingLine:t}),this.setState({lines:Object(r.a)({},this.state.lines,Object(d.a)({},e.target.getAttribute("textid"),""))}),this.setState({editValue:t.props.children})}},{key:"doneEditing",value:function(e){switch(e){case"ADD_LINE":this.addLine(this.state.editValue);break;case"EXIT":if(this.state.pendingLine){var t=this.createText(this.state.pendingLine.props.children,this.state.pendingLine.key);this.setState({lines:Object(r.a)({},this.state.lines,Object(d.a)({},this.state.pendingLine.key,t))})}this.setState({pendingLine:""});break;case"REMOVE_LINE":this.setState({lines:Object(r.a)({},this.state.lines,Object(d.a)({},this.state.pendingLine.key,""))}),this.setState({pendingLine:""})}this.setState({isEditing:!1}),this.setState({editValue:""}),this.setState({pendingLine:""})}},{key:"createText",value:function(e,t,i){var n=t||this.generateKey(),o=i||this.state.editLocation;return a.a.createElement(f,{editText:this.editText,editLocation:o,onStop:this.onStop,handleDrag:this.handleDrag,key:n,textId:n},e)}},{key:"generateKey",value:function(){return(new Date).toISOString()}},{key:"addLine",value:function(e){if(""!==e.trim()){var t=this.generateKey();this.setState({lines:Object(r.a)({},this.state.lines,Object(d.a)({},t,this.createText(e,t)))})}}},{key:"handleInput",value:function(e){this.setState({editValue:e.target.value})}},{key:"render",value:function(){var e=this.props.pageSize,t=e.width,i=e.height,n=x()?"20px":"".concat((window.innerHeight-i)/2,"px");return a.a.createElement("div",{className:"page",onDoubleClick:this.editLine,style:{marginTop:n,height:"".concat(i,"px"),width:"".concat(t,"px")}},this.props.horizontalGuides,this.props.verticalGuides,Object.values(this.state.lines),this.state.isEditing?a.a.createElement(y,{doneEditing:this.doneEditing,handleInput:this.handleInput,editValue:this.state.editValue,editLocation:this.state.editLocation}):"")}}]),t}(a.a.Component),S=i(4),O=i(5),w=function(e){return a.a.createElement(n.Fragment,null,a.a.createElement("button",{onClick:e.capturePage,className:"capture-button icon-button"},a.a.createElement("div",{className:"icon"},a.a.createElement(S.a,{icon:O.a}))))},j=function(e){var t=function(){return"horizontal"===e.orientation?a.a.createElement(S.a,{icon:O.b}):a.a.createElement(S.a,{icon:O.c})};return a.a.createElement(n.Fragment,null,e.guidesHidden?a.a.createElement("button",{className:"guide-button icon-button",onClick:function(){return e.showGuides(e.orientation)}},a.a.createElement("div",{className:"icon"},t())):a.a.createElement("button",{className:"guide-button icon-button",onClick:function(){return e.hideGuides(e.orientation)}},a.a.createElement("div",{className:"icon"},t())))},L=function(e){return a.a.createElement("button",{className:"print-button icon-button",onClick:window.print},a.a.createElement("div",{className:"icon"},a.a.createElement(S.a,{icon:O.d})))},k=(i(37),function(e){return a.a.createElement("div",{className:"settings",style:{width:"".concat(e.pageSize.width,"px")}},a.a.createElement(L,null),a.a.createElement(w,{capturePage:e.capturePage}),a.a.createElement(j,{showGuides:e.showGuides,hideGuides:e.hideGuides,guidesHidden:e.guidesHiddenVertical,orientation:"vertical"}),a.a.createElement(j,{showGuides:e.showGuides,hideGuides:e.hideGuides,guidesHidden:e.guidesHiddenHorizontal,orientation:"horizontal"}))}),C=(i(38),function(e){return"vertical"===e.orientation?a.a.createElement(E.a,{axis:"x",bounds:"parent",onStop:e.onGuideStop},e.isHidden?a.a.createElement("div",{className:"guide-vertical guide",onClick:e.selectGuide,guideid:e.guideid,style:{display:"none",height:"".concat(e.pageSize.height,"px"),left:"".concat(e.position,"px")}}):a.a.createElement("div",{className:"guide-vertical guide",onClick:e.selectGuide,guideid:e.guideid,style:{height:"".concat(e.pageSize.height,"px"),left:"".concat(e.position,"px")}})):a.a.createElement(E.a,{axis:"y",bounds:"parent",onStop:e.onGuideStop},e.isHidden?a.a.createElement("div",{className:"guide-horizontal guide",onClick:e.selectGuide,guideid:e.guideid,style:{display:"none",width:"".concat(e.pageSize.width,"px"),top:"".concat(e.position,"px")}}):a.a.createElement("div",{className:"guide-horizontal guide",onClick:e.selectGuide,guideid:e.guideid,style:{width:"".concat(e.pageSize.width,"px"),top:"".concat(e.position,"px")}}))}),N=i(8),D=i.n(N),z=i(22),G=i.n(z);i(47);D.a.setAppElement("#root");var I=function(){var e=Object(n.useState)({width:500,height:700}),t=Object(s.a)(e,2),i=t[0],o=t[1],c=Object(n.useState)([i.width/2,i.width/2]),d=Object(s.a)(c,2),r=d[0],u=d[1],l=Object(n.useState)([i.height/2,i.height/2]),h=Object(s.a)(l,2),g=h[0],p=h[1],b=function(e,t){for(var n="horizontal"===e?g:r,o=[],c=0;c<2;c++){var s=c+(new Date).toISOString();o.push(a.a.createElement(C,{pageSize:i,orientation:e,isHidden:t,key:s,guideid:s,position:n[c]}))}return o},m=Object(n.useState)(!0),E=Object(s.a)(m,2),f=E[0],y=E[1],w=Object(n.useState)(!0),j=Object(s.a)(w,2),L=j[0],N=j[1],z=Object(n.useState)(b("horizontal",!0)),I=Object(s.a)(z,2),H=I[0],R=I[1],B=Object(n.useState)(b("vertical",!0)),T=Object(s.a)(B,2),V=T[0],A=T[1],q=Object(n.useState)(!1),K=Object(s.a)(q,2),P=K[0],_=K[1],F=Object(n.useState)(""),M=Object(s.a)(F,2),W=M[0],X=M[1],J=Object(n.useState)(""),Y=Object(s.a)(J,2),U=Y[0],$=Y[1],Q=function(){_(!1)};function Z(e){var t=document.querySelectorAll(".guide-".concat(e)),i=[];"horizontal"===e?(t.forEach((function(e){i.push(e.getBoundingClientRect().y-U.getBoundingClientRect().y)})),p(i)):(t.forEach((function(e){i.push(e.getBoundingClientRect().x-U.getBoundingClientRect().x)})),u(i))}a.a.useEffect((function(){if(x()){var e=document.querySelector(".settings").offsetHeight,t={width:window.innerWidth-25,height:window.innerHeight-e-30-20};o(t),u([t.width/2,t.width/2]),p([t.height/2,t.height/2]),D.a.defaultStyles.overlay.width="".concat(window.innerWidth,"px"),D.a.defaultStyles.overlay.height="".concat(window.innerHeight,"px")}var i=document.querySelector(".page");$(i)}),[]);var ee=x()?{content:{width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),margin:"0 auto",padding:"0",position:"absolute",left:"13px"}}:{content:{width:"".concat(i.width+50,"px"),height:"".concat(i.height+50,"px"),margin:"40px auto",padding:"0",display:"flex"}};return D.a.defaultStyles.overlay.backgroundColor="pink",a.a.createElement(n.Fragment,null,a.a.createElement(D.a,{isOpen:P,onRequestClose:Q,transparent:!0,style:ee,portalClassName:"modal"},x()?a.a.createElement("img",{className:"capture-img",src:W,width:"".concat(i.width,"px"),alt:"your poem silly!"}):a.a.createElement("img",{className:"capture-img",src:W,height:"".concat(i.height,"px"),width:"".concat(i.width,"px"),alt:"your poem silly!"}),a.a.createElement("button",{className:"icon-button modal-close",onClick:Q},a.a.createElement(S.a,{icon:O.e}))),a.a.createElement(v,{pageSize:i,horizontalGuides:H,verticalGuides:V}),a.a.createElement(k,{pageSize:i,showGuides:function(e){"horizontal"===e?(R(b(e,!1)),y(!1)):(A(b(e,!1)),N(!1))},hideGuides:function(e){"horizontal"===e?(R(b(e,!0)),y(!0),Z(e)):(A(b(e,!0)),N(!0),Z(e))},guidesHiddenHorizontal:f,guidesHiddenVertical:L,capturePage:function(){G()(document.querySelector(".page"),{scale:4}).then((function(e){X(e.toDataURL())})),_(!0)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.744713ea.chunk.js.map