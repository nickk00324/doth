(this["webpackJsonppoetry-app"]=this["webpackJsonppoetry-app"]||[]).push([[0],{23:function(e,t,i){e.exports=i(49)},28:function(e,t,i){},29:function(e,t,i){},30:function(e,t,i){},31:function(e,t,i){},37:function(e,t,i){},38:function(e,t,i){},39:function(e,t,i){},48:function(e,t,i){},49:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(10),c=i.n(o),s=(i(28),i(2)),r=i(6),d=i(7),l=i(11),u=i(12),h=i(14),g=i(13),p=i(3),m=i(15),b=i(9),E=i.n(b),f=(i(29),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={onStop:this.props.onStop,onDrag:this.props.handleDrag};return a.a.createElement(E.a,Object.assign({bounds:"parent"},e),a.a.createElement("div",{textid:this.props.textId,className:"text",onDoubleClick:this.props.editText,style:{position:"absolute",top:this.props.editLocation?"".concat(this.props.editLocation.y,"px"):"0px",left:this.props.editLocation?"".concat(this.props.editLocation.x,"px"):"0px"}},this.props.children))}}]),t}(a.a.Component)),y=(i(30),function(e){return a.a.createElement("div",{className:"input",onKeyPress:function(t){13===t.which&&e.doneEditing("ADD_LINE")},style:{position:"absolute",top:"".concat(e.editLocation.y,"px"),left:"".concat(e.editLocation.x,"px")}},a.a.createElement("input",{type:"text",placeholder:"type line here, click 'add' to save",autoFocus:!0,defaultValue:e.editValue,className:"input-text",onChange:e.handleInput}),a.a.createElement("button",{className:"input-button add-button",onClick:function(){return e.doneEditing("ADD_LINE")}},"add"),a.a.createElement("button",{className:"input-button exit-button",onClick:function(){return e.doneEditing("EXIT")}},"exit"),a.a.createElement("button",{className:"input-button remove-button",onClick:function(){return e.doneEditing("REMOVE_LINE")}},"remove"))}),x=(i(31),function(){return"undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}),v=function(e){function t(e){var i;return Object(l.a)(this,t),(i=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={lines:{},page:"",isEditing:!1,editValue:"",pendingLine:"",currentDraggedLine:"",editLocation:{x:"",y:""}},i.editLine=i.editLine.bind(Object(p.a)(i)),i.doneEditing=i.doneEditing.bind(Object(p.a)(i)),i.handleInput=i.handleInput.bind(Object(p.a)(i)),i.editText=i.editText.bind(Object(p.a)(i)),i.addLine=i.addLine.bind(Object(p.a)(i)),i.generateKey=i.generateKey.bind(Object(p.a)(i)),i.onStop=i.onStop.bind(Object(p.a)(i)),i.handleDrag=i.handleDrag.bind(Object(p.a)(i)),i}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector(".page");this.setState({page:e})}},{key:"onStop",value:function(){if(this.state.currentDraggedLine){var e=this.createText(this.state.currentDraggedLine.props.children,this.state.currentDraggedLine.key);this.setState({lines:Object(d.a)({},this.state.lines,Object(r.a)({},e.key,e)),currentDraggedLine:""})}}},{key:"handleDrag",value:function(e){this.state.currentDraggedLine||this.setState({currentDraggedLine:this.state.lines[e.target.getAttribute("textid")]})}},{key:"editLine",value:function(e){this.state.isEditing||(this.setState({isEditing:!0}),e.target.getAttribute("class").includes("page")?this.setState({editLocation:{x:e.clientX-e.target.getBoundingClientRect().x,y:e.clientY-e.target.getBoundingClientRect().y}}):e.target.getAttribute("class").includes("guide")?this.setState({editLocation:{x:e.clientX-this.state.page.getBoundingClientRect().x,y:e.clientY-this.state.page.getBoundingClientRect().y}}):this.setState({editLocation:{x:e.target.getBoundingClientRect().x-this.state.page.getBoundingClientRect().x,y:e.target.getBoundingClientRect().y-this.state.page.getBoundingClientRect().y}}))}},{key:"editText",value:function(e){e.stopPropagation(),this.editLine(e);var t=this.state.lines[e.target.getAttribute("textid")];this.setState({pendingLine:t}),this.setState({lines:Object(d.a)({},this.state.lines,Object(r.a)({},e.target.getAttribute("textid"),""))}),this.setState({editValue:t.props.children})}},{key:"doneEditing",value:function(e){switch(e){case"ADD_LINE":this.addLine(this.state.editValue);break;case"EXIT":if(this.state.pendingLine){var t=this.createText(this.state.pendingLine.props.children,this.state.pendingLine.key);this.setState({lines:Object(d.a)({},this.state.lines,Object(r.a)({},this.state.pendingLine.key,t))})}this.setState({pendingLine:""});break;case"REMOVE_LINE":this.setState({lines:Object(d.a)({},this.state.lines,Object(r.a)({},this.state.pendingLine.key,""))}),this.setState({pendingLine:""})}this.setState({isEditing:!1}),this.setState({editValue:""}),this.setState({pendingLine:""})}},{key:"createText",value:function(e,t,i){var n=t||this.generateKey(),o=i||this.state.editLocation;return a.a.createElement(f,{editText:this.editText,editLocation:o,onStop:this.onStop,handleDrag:this.handleDrag,key:n,textId:n},e)}},{key:"generateKey",value:function(){return(new Date).toISOString()}},{key:"addLine",value:function(e){if(""!==e.trim()){var t=this.generateKey();this.setState({lines:Object(d.a)({},this.state.lines,Object(r.a)({},t,this.createText(e,t)))})}}},{key:"handleInput",value:function(e){this.setState({editValue:e.target.value})}},{key:"render",value:function(){var e=this.props.pageSize,t=e.width,i=e.height,n=x()?"20px":"".concat((window.innerHeight-i)/2,"px");return a.a.createElement("div",{className:"page",onDoubleClick:this.editLine,style:{marginTop:n,height:"".concat(i,"px"),width:"".concat(t,"px")}},this.props.horizontalGuides,this.props.verticalGuides,Object.values(this.state.lines),this.state.isEditing?a.a.createElement(y,{doneEditing:this.doneEditing,handleInput:this.handleInput,editValue:this.state.editValue,editLocation:this.state.editLocation}):"")}}]),t}(a.a.Component),S=i(4),O=i(5),w=function(e){return a.a.createElement(n.Fragment,null,a.a.createElement("button",{onClick:e.capturePage,className:"capture-button icon-button"},a.a.createElement("div",{className:"icon"},a.a.createElement(S.a,{icon:O.a}))))},j=function(e){var t=function(){return"horizontal"===e.orientation?a.a.createElement(S.a,{icon:O.b}):a.a.createElement(S.a,{icon:O.c})};return a.a.createElement(n.Fragment,null,e.guidesHidden?a.a.createElement("button",{className:"guide-button icon-button",onClick:function(){return e.showGuides(e.orientation)}},a.a.createElement("div",{className:"icon"},t())):a.a.createElement("button",{className:"guide-button icon-button",onClick:function(){return e.hideGuides(e.orientation)}},a.a.createElement("div",{className:"icon"},t())))},k=function(e){return a.a.createElement("button",{className:"print-button icon-button",onClick:window.print},a.a.createElement("div",{className:"icon"},a.a.createElement(S.a,{icon:O.d})))},L=(i(37),function(e){return a.a.createElement("div",{className:"settings",style:{width:"".concat(e.pageSize.width,"px")}},a.a.createElement(k,null),a.a.createElement(w,{capturePage:e.capturePage}),a.a.createElement(j,{showGuides:e.showGuides,hideGuides:e.hideGuides,guidesHidden:e.guidesHiddenVertical,orientation:"vertical"}),a.a.createElement(j,{showGuides:e.showGuides,hideGuides:e.hideGuides,guidesHidden:e.guidesHiddenHorizontal,orientation:"horizontal"}))}),C=(i(38),function(e){return"vertical"===e.orientation?a.a.createElement(E.a,{axis:"x",bounds:"parent",onStop:e.onGuideStop},e.isHidden?a.a.createElement("div",{className:"guide-vertical guide",onClick:e.selectGuide,guideid:e.guideid,style:{display:"none",height:"".concat(e.pageSize.height,"px"),left:"".concat(e.position,"px")}}):a.a.createElement("div",{className:"guide-vertical guide",onClick:e.selectGuide,guideid:e.guideid,style:{height:"".concat(e.pageSize.height,"px"),left:"".concat(e.position,"px")}})):a.a.createElement(E.a,{axis:"y",bounds:"parent",onStop:e.onGuideStop},e.isHidden?a.a.createElement("div",{className:"guide-horizontal guide",onClick:e.selectGuide,guideid:e.guideid,style:{display:"none",width:"".concat(e.pageSize.width,"px"),top:"".concat(e.position,"px")}}):a.a.createElement("div",{className:"guide-horizontal guide",onClick:e.selectGuide,guideid:e.guideid,style:{width:"".concat(e.pageSize.width,"px"),top:"".concat(e.position,"px")}}))}),N=(i(39),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),i=t[0],o=t[1];return a.a.createElement("div",{className:"title",onClick:function(){o(!0)},style:i?{display:"none"}:{display:"flex"}},a.a.createElement("h1",null,"doth."),a.a.createElement("div",{className:"instructions"},a.a.createElement("p",null,"double click to add line, or edit line"),a.a.createElement("p",null,"click drag to move lines/guides"),a.a.createElement("p",null,"capture to generate image file, right click and save"),a.a.createElement("p",null,"have fun!")))}),D=i(8),z=i.n(D),G=i(22),I=i.n(G);i(48);z.a.setAppElement("#root");var H=function(){var e=Object(n.useState)({width:500,height:700}),t=Object(s.a)(e,2),i=t[0],o=t[1],c=Object(n.useState)([i.width/2,i.width/2]),r=Object(s.a)(c,2),d=r[0],l=r[1],u=Object(n.useState)([i.height/2,i.height/2]),h=Object(s.a)(u,2),g=h[0],p=h[1],m=function(e,t){for(var n="horizontal"===e?g:d,o=[],c=0;c<2;c++){var s=c+(new Date).toISOString();o.push(a.a.createElement(C,{pageSize:i,orientation:e,isHidden:t,key:s,guideid:s,position:n[c]}))}return o},b=Object(n.useState)(!0),E=Object(s.a)(b,2),f=E[0],y=E[1],w=Object(n.useState)(!0),j=Object(s.a)(w,2),k=j[0],D=j[1],G=Object(n.useState)(m("horizontal",!0)),H=Object(s.a)(G,2),R=H[0],B=H[1],T=Object(n.useState)(m("vertical",!0)),V=Object(s.a)(T,2),A=V[0],q=V[1],K=Object(n.useState)(!1),P=Object(s.a)(K,2),_=P[0],F=P[1],M=Object(n.useState)(""),W=Object(s.a)(M,2),X=W[0],J=W[1],Y=Object(n.useState)(""),U=Object(s.a)(Y,2),$=U[0],Q=U[1],Z=function(){F(!1)};function ee(e){var t=document.querySelectorAll(".guide-".concat(e)),i=[];"horizontal"===e?(t.forEach((function(e){i.push(e.getBoundingClientRect().y-$.getBoundingClientRect().y)})),p(i)):(t.forEach((function(e){i.push(e.getBoundingClientRect().x-$.getBoundingClientRect().x)})),l(i))}a.a.useEffect((function(){if(x()){var e=document.querySelector(".settings").offsetHeight,t={width:window.innerWidth-25,height:window.innerHeight-e-30-20};o(t),l([t.width/2,t.width/2]),p([t.height/2,t.height/2]),z.a.defaultStyles.overlay.width="".concat(window.innerWidth,"px"),z.a.defaultStyles.overlay.height="".concat(window.innerHeight,"px")}var i=document.querySelector(".page");Q(i)}),[]);var te=x()?{content:{width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),margin:"0 auto",padding:"0",position:"absolute",left:"13px"}}:{content:{width:"".concat(i.width+50,"px"),height:"".concat(i.height+50,"px"),margin:"40px auto",padding:"0",display:"flex"}};return z.a.defaultStyles.overlay.backgroundColor="pink",a.a.createElement(n.Fragment,null,a.a.createElement(N,null),a.a.createElement(z.a,{isOpen:_,onRequestClose:Z,transparent:!0,style:te,portalClassName:"modal"},x()?a.a.createElement("img",{className:"capture-img",src:X,width:"".concat(i.width,"px"),alt:"your poem silly!"}):a.a.createElement("img",{className:"capture-img",src:X,height:"".concat(i.height,"px"),width:"".concat(i.width,"px"),alt:"your poem silly!"}),a.a.createElement("button",{className:"icon-button modal-close",onClick:Z},a.a.createElement(S.a,{icon:O.e}))),a.a.createElement(v,{pageSize:i,horizontalGuides:R,verticalGuides:A}),a.a.createElement(L,{pageSize:i,showGuides:function(e){"horizontal"===e?(B(m(e,!1)),y(!1)):(q(m(e,!1)),D(!1))},hideGuides:function(e){"horizontal"===e?(B(m(e,!0)),y(!0),ee(e)):(q(m(e,!0)),D(!0),ee(e))},guidesHiddenHorizontal:f,guidesHiddenVertical:k,capturePage:function(){I()(document.querySelector(".page"),{scale:4}).then((function(e){J(e.toDataURL())})),F(!0)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.89cb1e28.chunk.js.map